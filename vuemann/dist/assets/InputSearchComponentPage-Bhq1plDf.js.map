{"version":3,"file":"InputSearchComponentPage-Bhq1plDf.js","sources":["../../src/views/servicesPage/form/inputs/InputSearchComponentPage.vue"],"sourcesContent":["<script setup>\r\nimport { ref } from \"vue\";\r\nimport CodeHtml from \"@brugmann/vuemann/src/components/codeHtml/CodeHtmlComponent.vue\"\r\nimport InputSearch from \"@brugmann/vuemann/src/services/form/views/inputs/InputSearchComponent.vue\";\r\n\r\nconst animals = ['chat', 'chien', 'lapin', 'vache', 'cheval', 'poney', 'cochon', 'renard']\r\nconst result = ref([])\r\nconst callback = value => {\r\n    const animalsFiltered = animals.filter(animal => animal.startsWith(value))\r\n    result.value = animalsFiltered\r\n    return result.value\r\n}\r\n</script>\r\n\r\n<template>\r\n  <h1 class=\"h1\">Input Search Component</h1>\r\n  <p>\r\n    Ce component permet d'exécuter une fonction de recherche à chaque frappe de clavier. \r\n  </p>\r\n  \r\n  <h2 class=\"h2\">Propriétés</h2>\r\n  <table class=\"t-default mb-15 w-100\">\r\n    <thead>\r\n      <tr>\r\n        <th>Nom</th>\r\n        <th>Type</th>\r\n        <th>Required</th>\r\n        <th>Default</th>\r\n        <th>Description</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr>\r\n        <td>name</td>\r\n        <td>String</td>\r\n        <td>oui</td>\r\n        <td>-</td>\r\n        <td>Nom et id de l'input</td>\r\n      </tr>\r\n      <tr>\r\n        <td>placeholder</td>\r\n        <td>String</td>\r\n        <td>-</td>\r\n        <td>null</td>\r\n        <td>Placeholder de l'input.</td>\r\n      </tr>\r\n      <tr>\r\n        <td>cb</td>\r\n        <td>Function</td>\r\n        <td>oui</td>\r\n        <td>-</td>\r\n        <td>Fonction de recherche a exécuter</td>\r\n      </tr>\r\n      <tr>\r\n        <td>pattern</td>\r\n        <td>Regexp</td>\r\n        <td>-</td>\r\n        <td>null</td>\r\n        <td>\r\n          Permet de ne pas activer la fonction de recherche si la touche pressée ne correspond \r\n          à la regexp.\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>displayError</td>\r\n        <td>Boolean</td>\r\n        <td>-</td>\r\n        <td>true</td>\r\n        <td>Afficher ou non les erreurs de validation.</td>\r\n      </tr>\r\n      <tr>\r\n        <td>noResult</td>\r\n        <td>String</td>\r\n        <td>-</td>\r\n        <td>null</td>\r\n        <td>Message à afficher lorsqu'aucun résultat n'est trouvé dans le dropdown.</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  \r\n  <h2 class=\"h2\">Méthodes</h2>\r\n  \r\n  <h3 class=\"h3\">runCallBack</h3>\r\n  <p>Permet d'exécuter le callback fourni au component.</p>\r\n  \r\n  <h3 class=\"h3\">toggleDropdown</h3>\r\n  <p>Permet d'ouvrir / fermer le dropdown. Si aucun état n'est passé en paramètre, la fonction va inverser l'état du dropdown.</p>\r\n  <table class=\"t-default\">\r\n      <thead>\r\n          <tr>\r\n              <th>Nom</th>\r\n              <th>Type</th>\r\n              <th>Required</th>\r\n              <th>Description</th>\r\n          </tr>\r\n      </thead>\r\n      <tbody>\r\n          <tr>\r\n              <td>state</td>\r\n              <td>Boolean</td>\r\n              <th>-</th>\r\n              <td>True pour afficher et False pour le masquer</td>\r\n          </tr>\r\n      </tbody>\r\n  </table>\r\n  \r\n  <h3 class=\"h3\">setItems</h3>\r\n  <p>Permet de modifier la valeur d'items.</p>\r\n  <table class=\"t-default\">\r\n    <thead>\r\n      <tr>\r\n        <th>Nom</th>\r\n        <th>Type</th>\r\n        <th>Required</th>\r\n        <th>Description</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr>\r\n        <td>value</td>\r\n        <td>Mix</td>\r\n        <th>oui</th>\r\n        <td>Valeur que prendre la variable items.</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  \r\n  <h3 class=\"h3\">setSearch</h3>\r\n  <p>Permet de modifier la valeur de la recherche.</p>\r\n  <table class=\"t-default\">\r\n    <thead>\r\n      <tr>\r\n        <th>Nom</th>\r\n        <th>Type</th>\r\n        <th>Required</th>\r\n        <th>Description</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr>\r\n        <td>value</td>\r\n        <td>Mix</td>\r\n        <th>oui</th>\r\n        <td>Valeur que prendre la variable search.</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  \r\n  <h3 class=\"h3\">focus</h3>\r\n  <p>Permet de focus l'input du component.</p>\r\n  \r\n  <h2 class=\"h2\">Slot Template</h2>\r\n  <p>\r\n    Le component expose un slot par défaut qui permet d'accéder aux résultats de recherche via la variable <span class=\"badge-code\">items</span>.\r\n  </p>\r\n  <table class=\"t-default\">\r\n    <thead>\r\n      <tr>\r\n        <th>Variable</th>\r\n        <th>Type</th>\r\n        <th>Description</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr>\r\n        <td>items</td>\r\n        <td>Array</td>\r\n        <td>Tableau des résultats retournés par la fonction de recherche</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <p>\r\n    <strong>Note :</strong> Vous pouvez renommer la variable <span class=\"badge-code\">items</span> lors de l'utilisation du slot : \r\n    <span class=\"badge-code\">v-slot:default=\"{ items : maVariable }\"</span>\r\n  </p>\r\n  \r\n  <h2 class=\"h2\">Exemples</h2>\r\n  \r\n  <h3 class=\"h3\">Input search classique</h3>\r\n  <p>Recherche possible : {{ animals }}</p>\r\n  <InputSearch name=\"search\" :cb=\"callback\" label=\"Recherche\" />\r\n  <p>Éléments trouvés : {{ result }}</p>\r\n  \r\n  <h3 class=\"h3\">Input search avec Dropdown</h3>\r\n  <p>\r\n    Vous avez la possibilité d'afficher les résultats dans un dropdown. Pour cela votre fonction de recherche doit retourner \r\n    les résultats trouvés. Ces résultats seront automatiquement accessibles via le template slot.\r\n  </p>\r\n  <p>\r\n    <strong>Important :</strong> La fonction de recherche doit retourner un tableau de résultats. Si aucun résultat n'est trouvé, \r\n    retournez un tableau vide <span class=\"badge-code\">[]</span>.\r\n  </p>\r\n  <InputSearch name=\"search_dropdown\" :cb=\"callback\" label=\"Recherche\">\r\n    <template v-slot:default=\"{ items : datas  }\">\r\n      <ul class=\"services-list | f-column g-5 my-5\">\r\n        <li\r\n          v-for=\"data in datas\"\r\n          :key=\"data\"\r\n          class=\"px-15\"\r\n        >\r\n          {{ data }}\r\n        </li>\r\n      </ul>\r\n    </template>\r\n  </InputSearch>\r\n  \r\n  <h3 class=\"h3\">Exemple avec API et gestion d'erreurs</h3>\r\n  <p>\r\n    Voici un exemple plus complet avec une recherche via API, gestion des erreurs et affichage du nombre de résultats :\r\n  </p>\r\n  <CodeHtml>\r\n    <scriptBalise v-pre>\r\n      const interventionSearch = async () => {\r\n        const result = await OperaController.interventionSearch({\r\n          search: searchIntervention.value, \r\n          speciality_id: hospitalizationDatas.value.speciality.id\r\n        })\r\n        if(result.status !== STATUS.SUCCESS) { \r\n          return []\r\n        }\r\n        return result.interventions  \r\n      }\r\n    </scriptBalise>\r\n    <template v-pre>\r\n      <InputSearch    \r\n        :label=\"t('request-create-form-chir-component.search-intervention-label')\"\r\n        name=\"reason\"\r\n        ref=\"inputSearchIntervention\"\r\n        :modelValue=\"searchIntervention\"\r\n        :cb=\"interventionSearch\"\r\n        :displayError=\"false\"\r\n        noResult=\"request-create-form-chir-component.search-intervention-no-result\"\r\n      >\r\n        <template v-slot:default=\"{ items : interventions  }\">\r\n          <p data-total class=\"result-total | ml-10 fw-700 color-primary-300\">\r\n            {{ t(interventions.length > 1 ? 'request-create-form-chir-component.search-interventions-total' : 'request-create-form-chir-component.search-intervention-result', { total: interventions.length }) }}\r\n          </p>\r\n          <ul class=\"interventions-results | f-column g-5 my-5\">\r\n            <li \r\n              v-for=\"intervention in interventions\" \r\n              :key=\"intervention\"\r\n              class=\"pointer bg-primary-100-hover px-10\"\r\n              v-on:click=\"selectIntervention(intervention)\"\r\n            >\r\n              <div class=\"praticien-item\">\r\n                {{ intervention.name }}\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </template>\r\n      </InputSearch>\r\n    </template>\r\n  </CodeHtml>\r\n  \r\n  <h2 class=\"h2\">Code</h2>\r\n  <!-- eslint-disable -->\r\n  <CodeHtml class=\"my-15\">\r\n    <scriptBalise v-pre>\r\n      import InputSearch from \"@brugmann/vuemann/src/services/form/views/inputs/InputSearchComponent.vue\"; \r\n    </scriptBalise>\r\n    <template v-pre>\r\n      <InputSearch name=\"search\" :cb=\"callback\"/>\r\n    </template>\r\n  </CodeHtml>\r\n  <!-- eslint-enable -->\r\n  \r\n  <h3 class=\"h3\">Personnalisation</h3>\r\n  <p>\r\n    Vous pouvez personnaliser la variable items fourni par le component de la façon suivante <span class=\"badge-code\">v-slot:default=\"{ items : animals }\"</span>\r\n  </p>\r\n  \r\n  <h3 class=\"h3\">Bonnes pratiques</h3>\r\n  <ul>\r\n    <li>\r\n      <strong>Fonction de recherche :</strong> Toujours retourner un tableau, même vide <span class=\"badge-code\">[]</span> en cas d'erreur ou d'absence de résultats\r\n    </li>\r\n    <li>\r\n      <strong>Gestion d'erreurs :</strong> Vérifier le statut de la réponse API avant de retourner les données\r\n    </li>\r\n    <li>\r\n      <strong>Performance :</strong> Implémenter un debounce dans votre fonction de recherche pour éviter trop d'appels API\r\n    </li>\r\n    <li>\r\n      <strong>Accessibilité :</strong> Utiliser des clés uniques pour les éléments de la liste (propriété <span class=\"badge-code\">:key</span>)\r\n    </li>\r\n    <li>\r\n      <strong>UX :</strong> Afficher le nombre de résultats trouvés et un message quand aucun résultat n'est disponible\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.textarea-value {\r\n    white-space: pre-wrap\r\n}\r\n</style>\r\n"],"names":["animals","result","ref","callback","value","animalsFiltered","animal","_createElementVNode","_toDisplayString","_createVNode","InputSearch","_cache","_withCtx","datas","_hoisted_1","_createElementBlock","_Fragment","_renderList","data","CodeHtml","_hoisted_2"],"mappings":"qlBAKA,MAAMA,EAAU,CAAC,OAAQ,QAAS,QAAS,QAAS,SAAU,QAAS,SAAU,QAAQ,EACnFC,EAASC,EAAI,EAAE,EACfC,EAAWC,GAAS,CACtB,MAAMC,EAAkBL,EAAQ,OAAOM,GAAUA,EAAO,WAAWF,CAAK,CAAC,EACzE,OAAAH,EAAO,MAAQI,EACRJ,EAAO,KAClB,+9FAwKEM,EAAyC,IAAA,KAAtC,wBAAqBC,EAAGR,CAAO,CAAA,EAClCS,EAA8DC,EAAA,CAAjD,KAAK,SAAU,GAAIP,EAAU,MAAM,cAChDI,EAAsC,IAAA,KAAnC,sBAAmBC,EAAGP,EAAA,KAAM,EAAA,CAAA,EAE/BU,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAJ,EAA8C,KAAA,CAA1C,MAAM,IAAI,EAAC,6BAA0B,EAAA,GACzCI,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAJ,EAGI,SAHD,2NAGH,EAAA,eACAA,EAGI,IAAA,KAAA,CAFFA,EAA4B,cAApB,aAAW,IAAS,8HACF,EAAAA,EAAkC,OAAA,CAA5B,MAAM,YAAY,EAAC,IAAE,IAAO,IAC9D,QACAE,EAYcC,EAAA,CAZD,KAAK,kBAAmB,GAAIP,EAAU,MAAM,cACtC,QAAOS,EACtB,CAQK,CAAA,MAT6BC,CAAK,IAAA,CACvCN,EAQK,KARLO,EAQK,QAPHC,EAMKC,EAAA,KAAAC,EALYJ,EAARK,QADTH,EAMK,KAAA,CAJF,IAAKG,EACN,MAAM,WAEHA,CAAI,EAAA,CAAA,oBAMfP,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAJ,EAAyD,KAAA,CAArD,MAAM,IAAI,EAAC,wCAAqC,EAAA,GACpDI,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAJ,EAEI,SAFD,wHAEH,EAAA,GACAE,EA0CWU,EAAA,KAAA,WAzCT,IAWe,CAXfR,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAJ,EAWe,oBAXK,qRAWpB,EAAA,GACAA,EA4BW,WAAA,KAAA,CA3BTA,EA0Bc,cA1Bda,EA0Bc,CAAA,GAAAT,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAjBZJ,EAgBW,WAAA,CAhBD,gBAAe,4BAA4B,EAAA,CACnDA,EAEI,IAAA,CAFD,aAAA,GAAW,MAAM,iDAAgD,0MAEpE,EACAA,EAWK,KAAA,CAXD,MAAM,2CAA2C,EAAA,CACnDA,EASK,KAAA,CARH,QAAM,gCACN,OAAK,eACL,MAAM,qCACN,YAAW,qCAEXA,EAEM,MAAA,CAFD,MAAM,gBAAgB,EAAC,2BAE5B,6BAQZI,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAJ,EAAwB,KAAA,CAApB,MAAM,IAAI,EAAC,OAAI,EAAA,GAEnBE,EAOWU,EAAA,CAPD,MAAM,OAAO,EAAA,WACrB,IAEe,CAAA,GAAAR,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFfJ,EAEe,oBAFK,yGAEpB,EAAA,EACAA,EAEW,WAAA,KAAA,CADTA,EAA2C,cAAA,CAA9B,KAAK,SAAS,MAAI"}